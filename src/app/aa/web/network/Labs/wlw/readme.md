# 物联网

## 大作业 3 一个典型物联网系统中传输机制的设计与实现

一般一个典型的物联网系统包括感控层（传感器），网络层和应用层组成，而网络层主
要用于实现感控对象与应用层的服务对象之间的通信。本次作业就以 TCP/IP 协议栈中传输
层协议的应用开发为目标，以 UDP 方式实现一种感控对象与服务对象之间的通信机制，其
体系结构如图 1 所示。其中感控对象为一个虚拟路灯对象，在实现过程中用随机数模拟其温
度、湿度和环境照度等感知数据，灯作为被控对象，可以通过服务器对其进行打开、关闭控
制，且用不同颜色表示其开关状态。每个虚拟路灯都将有一个标识，以示区别。而服务对象
可以同时与若干个虚拟路灯对象通信，每个虚拟路灯会定期向服务对象发送其当前状态，服
务对象可以对任一个虚拟路灯进行开关控制。

要求：
- 虚拟路灯状态上传数据直接基于 UDP 实现传输，不考虑可靠性，而服务对象发送
给各虚拟路灯的开关命令要利用握手机制实现可靠传输。
- 基于 UDP 自定义上传、下发数据包格式和传输方式。并实现通信协议的定义、封
装和解析。
- 虚拟路灯界面主要显示当前状态，包括当前温度、湿度和照度，这些都可以用随
机数产生，以及灯的开关状态；每个虚拟路灯皆有一个唯一设备 ID，并可以在界面上显示。
- 服务器上可以保存各虚拟路灯的历史状态数据，并且可以显示当前各虚拟路灯的
相应状态，包括灯的开关状态、温度、湿度和照度。各灯的历史数据可以按指定时段查询。
- 不限定编程语言。
- 完成后提交电子版报告（PDF 格式），包括：项目名称、项目目标、设计与实现、
测试结果、总结与展望、源代码等内容。同时可以录制 2 分钟左右的演示视频上传课程
网站。

架构图:
- UDP服务器
  - 以基于UDP的可靠传输方式下发命令(开、关灯)
- 各路灯客户端(一共有路灯设备，分别使用不同的 ip地址进行模拟)
  - 实时上传状态数据

- 服务端(3个区域:上中下)
  - 上: 所连接终端列表(包括当前状态，即温度、 湿度、照度和灯的开关状态)
    - 列表的右侧: 上面:开灯按钮(绿色), 下面:关灯按钮(红色), (就是选中列表中连接终端的设备，然后可以在服务端点击开灯或关灯)
  - 中:
    - 中的左: 上传数据包列表
    - 中的右: 下发数据包列表
  - 下:
    - 下的左: 启动服务(绿色)
    - 下的右: 停止服务(红色)
- 客户端(3个区域:上中下)
  - 上:
    - 左: 温度
    - 中: 湿度
    - 右: 照度
  - 中: 灯的开关状态(用颜色区分)
  - 下: 一行从左到右: 设备ip地址， 工作按钮(黄色)，停止按钮(红色)
